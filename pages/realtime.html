<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-time Air Quality Monitoring - Kathmandu | AirKTM</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/realtime.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <header class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo-section">
                <img src="../assets/Untitled design.png" alt="AirKTM Logo" class="logo-image">
            </a>
            <div class="nav-right-section">
                <nav class="nav-links">
                    <a href="../index.html" class="nav-link">Home</a>
                    <a href="realtime.html" class="nav-link active">Realtime</a>
                    <a href="#" class="nav-link">Forecast</a>
                    <a href="alerts.html" class="nav-link">Alerts</a>
                    <a href="more-info.html" class="nav-link">More Info</a>
                </nav>
                <select class="station-select" id="stationSelect">
                    <option value="">Select Station...</option>
                </select>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <svg class="sun-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 2V4M12 20V22M4.93 4.93L6.34 6.34M17.66 17.66L19.07 19.07M2 12H4M20 12H22M4.93 19.07L6.34 17.66M17.66 6.34L19.07 4.93" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <svg class="moon-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="realtime-page-container">
        <!-- Current Air Quality Section -->
        <section class="current-aqi-section" id="currentAQISection">
            <div class="current-aqi-header">
                <h2 class="current-aqi-title">Current Air Quality</h2>
                <div class="current-aqi-emoji" id="currentAQIEmoji">üò∑</div>
            </div>
            <div class="current-aqi-content">
                <button class="nav-arrow nav-arrow-left" id="prevStationBtn" aria-label="Previous station">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="current-aqi-main">
                    <div class="current-aqi-location">
                        <span class="location-name" id="locationName">Thamel, Kathmandu</span>
                        <span class="last-updated" id="lastUpdated">Last updated: 2 minutes ago</span>
                    </div>
                    <div class="current-aqi-value">
                        <span class="aqi-number" id="aqiNumber">175</span>
                        <span class="aqi-label">AQI</span>
                    </div>
                    <div class="current-aqi-category" id="aqiCategory">Unhealthy</div>
                </div>
                <button class="nav-arrow nav-arrow-right" id="nextStationBtn" aria-label="Next station">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <div class="current-aqi-sidebar">
                    <div class="aqi-scale-legend">
                        <div class="legend-title">AQI Scale</div>
                        <div class="legend-items">
                            <div class="legend-item">
                                <span class="legend-dot" style="background-color: #00e400;"></span>
                                <span class="legend-text">Good (0-50)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-dot" style="background-color: #ffff00;"></span>
                                <span class="legend-text">Moderate (51-100)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-dot" style="background-color: #ff7e00;"></span>
                                <span class="legend-text">Unhealthy (101-150)</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-dot" style="background-color: #ff0000;"></span>
                                <span class="legend-text">Very Unhealthy (151-200)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="current-aqi-pollutants">
                <div class="pollutant-item">
                    <div class="pollutant-label">PM2.5</div>
                    <div class="pollutant-value" id="pm25Value">87.5 ¬µg/m¬≥</div>
                </div>
                <div class="pollutant-item">
                    <div class="pollutant-label">PM10</div>
                    <div class="pollutant-value" id="pm10Value">142.8 ¬µg/m¬≥</div>
                </div>
            </div>
        </section>

        <!-- Live Monitoring Stations Section -->
        <section class="monitoring-stations-section">
            <h2 class="section-title">Live Monitoring Stations - Kathmandu Valley</h2>
            <div class="monitoring-content">
                <div class="monitoring-graphs">
                    <div class="graph-container">
                        <h3 class="graph-title">Pollutant Levels (PM2.5 & PM10)</h3>
                        <canvas id="pollutantChart"></canvas>
                    </div>
                    <div class="graph-container">
                        <h3 class="graph-title">AQI Last 24 Hours</h3>
                        <canvas id="aqiChart"></canvas>
                    </div>
                </div>
                <div class="monitoring-map">
                    <div id="realtimeMap" class="realtime-map"></div>
                </div>
            </div>
        </section>

        <!-- City Comparison Section -->
        <section class="city-comparison-section">
            <h2 class="section-title">City Comparison</h2>
            <div class="comparison-controls">
                <div class="city-input-group">
                    <label for="cityA">City A</label>
                    <select id="cityA" class="city-select">
                        <option value="">Select City...</option>
                    </select>
                </div>
                <div class="city-input-group">
                    <label for="cityB">City B</label>
                    <select id="cityB" class="city-select">
                        <option value="">Select City...</option>
                    </select>
                </div>
            </div>
            <div class="comparison-chart-container">
                <canvas id="comparisonChart"></canvas>
            </div>
        </section>

        <!-- Air Quality Alerts Section -->
        <section class="alerts-section">
            <h2 class="section-title">Air Quality Alerts</h2>
            <div class="alerts-list" id="alertsList">
                <div class="alert-item health-alert">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-content">
                        <div class="alert-title">Health Alert</div>
                        <div class="alert-message" id="healthAlertMessage">AQI levels are unhealthy. Consider limiting outdoor activities and wearing protective masks.</div>
                        <div class="alert-time" id="healthAlertTime">2 minutes ago</div>
                    </div>
                </div>
                <div class="alert-item pm-alert">
                    <div class="alert-icon">‚ÑπÔ∏è</div>
                    <div class="alert-content">
                        <div class="alert-title">PM2.5 Spike</div>
                        <div class="alert-message" id="pmAlertMessage">PM2.5 levels have increased by 25% in the last hour due to increased traffic.</div>
                        <div class="alert-time" id="pmAlertTime">15 minutes ago</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-brand">
                <span class="footer-logo">AirKTM</span>
            </div>
            <div class="footer-copyright">
                <p>¬© 2024 Kathmandu Air Quality Monitor. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/realtime.js"></script>
    <script src="../js/theme-toggle.js"></script>
</body>
</html>
